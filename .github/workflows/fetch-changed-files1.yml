name: Fetch Changed Files1

on:
  pull_request:
    types:
      - opened

jobs:
  get_changed_files:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install dependencies
        run: npm install @actions/github
      
      - name: List of files 
        run: |
          URL="https://api.github.com/repos/${GITHUB_REPOSITORY}/pulls/${{ github.event.pull_request.number }}/files"
          FILES=$(curl -s -X GET -G $URL | jq -r '.[] | .filename' | tr '\n' ' ')
          echo "FILES=${FILES}" >> $GITHUB_ENV
        
      - name:
        run: |
          STRINGS="${{ env.FILES }}"
                                    
          for filename in $STRINGS; do
            echo "$filename"
          done